WORK IN PROGRESS - NOT WORKING YET

THIS IS NOT A OFFICIAL MOODLE AUTH PLUGIN - it is just a quick dirty one for my site (even thought I try make it generic)

--------------------------------------
Google Oauth 2.0 Authentication Plugin
--------------------------------------

Installation:
1- add the plugin into /auth/google/
2- in Moodle admin, enable the plugin (Admin block > Plugins > Auhtentication)
3- in the plugin settings, enter you client id + secret id. More information on Google: http://code.google.com/apis/accounts/docs/OAuth2.html#Registering

4- in your theme (most likely in login layout page) add the following HTML code:

<div class="singingoogle">
    <br/><?php echo get_string('signinwithgoogleaccount','auth_googleoauth2'); ?><br/>
    <a href="https://accounts.google.com/o/oauth2/auth?client_id=<?php echo get_config('auth/googleoauth2', 'googleclientid'); ?>&redirect_uri=<?php echo $CFG->wwwroot; ?>/login/index.php&scope=https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email&response_type=code"><img src="<?php echo $CFG->wwwroot ?>/theme/futsal/pix/google_logo.jpg" /></a>
</div>

Note about debugging: the plugin doesn't work in local. Google authentication will most likely fail to the first redirection,
                      and if you enter manually the authorization code in the URL, then it will fail when trying
                      to get the access token. Google will return a Missing authorization error.